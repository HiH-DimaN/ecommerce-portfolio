# PRD: Онлайн-школа английского — AI-автоматизация

**Версия**: 1.0  
**Дата**: 27 января 2025  
**Статус**: Draft  

---

## 1. Executive Summary

### 1.1 Продукт
Интерактивный кейс-портфолио, демонстрирующий AI-автоматизацию онлайн-школы английского языка на платформе GetCourse.

### 1.2 Цель
Показать потенциальным клиентам реальный результат внедрения AI-решений в образовательный бизнес через интерактивную демонстрацию работающей системы.

### 1.3 Ключевые результаты кейса

| Метрика | До | После | Изменение |
|---------|-----|-------|-----------|
| Retention | 85% | 92% | **+7%** |
| Новых студентов | — | +45/мес | **+45** |
| Кураторов | 3 | 1 | **-2** |
| Время ответа | 2-4 ч | 2-3 сек | **-99.9%** |
| AI resolution rate | 0% | 90% | **+90%** |
| ROI | — | 30 дней | — |
| Годовая прибыль | — | +4.4 млн руб | — |

---

## 2. Проблема

### 2.1 Контекст
Онлайн-школа английского языка на платформе GetCourse с 300+ студентами столкнулась с проблемой масштабирования.

### 2.2 Боли клиента

| Проблема | Количественно | Последствия |
|----------|---------------|-------------|
| Перегрузка кураторов | 100+ сообщений/день | Выгорание, текучка кадров |
| Проверка ДЗ | 30+ работ/день, 45 мин каждая | Долгая обратная связь |
| Время ответа | 2-4 часа в рабочее время | Студенты уходят |
| Отвал студентов | 15% (48 чел/мес) | 180к руб убытка/мес |
| Рабочая нагрузка | 40-60 часов/неделя | Невозможность масштабирования |

### 2.3 Корневые причины
1. **Ручная обработка** — каждый вопрос требует участия человека
2. **Отсутствие приоритизации** — кураторы не знают, кто в зоне риска
3. **Реактивный подход** — проблемы обнаруживаются слишком поздно
4. **Неструктурированная база знаний** — ответы на типовые вопросы каждый раз заново

---

## 3. Решение

### 3.1 Компоненты системы

| Компонент | Функция | Эффект |
|-----------|---------|--------|
| **AI-ассистент 24/7** | Отвечает на 90% вопросов за 2-3 сек | Мгновенная поддержка |
| **Автопроверка ДЗ** | AI анализирует и дает фидбек | Освобождение кураторов |
| **Risk Analyzer** | Автовыявление отстающих | Проактивное удержание |
| **Curator Dashboard** | Приоритизированный список задач | Фокус на важном |
| **Knowledge Base** | Векторный поиск по материалам курса | Точные ответы |

### 3.2 Архитектура решения

```
┌─────────────────────────────────────────────────────────────┐
│                      Frontend (Vue.js)                       │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────────┐│
│  │ AI Chat  │ │ Cabinet  │ │Dashboard │ │ Results/Metrics  ││
│  └────┬─────┘ └────┬─────┘ └────┬─────┘ └────────┬─────────┘│
└───────┼────────────┼────────────┼────────────────┼──────────┘
        │            │            │                │
        ▼            ▼            ▼                ▼
┌─────────────────────────────────────────────────────────────┐
│                    Backend (FastAPI)                         │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────────┐│
│  │ Chat API │ │Students  │ │Dashboard │ │   Metrics API    ││
│  └────┬─────┘ └────┬─────┘ └────┬─────┘ └────────┬─────────┘│
│       │            │            │                │           │
│  ┌────▼────────────▼────────────▼────────────────▼─────────┐│
│  │                    Services Layer                        ││
│  │  ┌────────────┐ ┌────────────┐ ┌────────────────────┐   ││
│  │  │AI Assistant│ │ HW Checker │ │   Risk Analyzer    │   ││
│  │  └─────┬──────┘ └─────┬──────┘ └─────────┬──────────┘   ││
│  └────────┼──────────────┼──────────────────┼──────────────┘│
└───────────┼──────────────┼──────────────────┼───────────────┘
            │              │                  │
            ▼              ▼                  ▼
┌───────────────────────────────────────────────────────────┐
│                    Data Layer                              │
│  ┌──────────────┐ ┌─────────────┐ ┌─────────────────────┐ │
│  │ PostgreSQL   │ │   Redis     │ │   pgvector          │ │
│  │ (main data)  │ │  (cache)    │ │ (AI knowledge)      │ │
│  └──────────────┘ └─────────────┘ └─────────────────────┘ │
└───────────────────────────────────────────────────────────┘
            │
            ▼
┌───────────────────────────────────────────────────────────┐
│                 External Services                          │
│  ┌──────────────┐ ┌─────────────┐ ┌─────────────────────┐ │
│  │   OpenAI     │ │  Telegram   │ │    GetCourse        │ │
│  │  (GPT-4o)    │ │  (Auth)     │ │    (mock)           │ │
│  └──────────────┘ └─────────────┘ └─────────────────────┘ │
└───────────────────────────────────────────────────────────┘
```

---

## 4. Целевая аудитория

### 4.1 Первичная аудитория
**Владельцы онлайн-школ и курсов** на GetCourse/Tilda/самописных платформах:
- Выручка: 500к-5м руб/мес
- Студентов: 100-1000
- Боль: масштабирование без роста штата

### 4.2 Вторичная аудитория
- **Маркетологи и продюсеры** онлайн-курсов
- **Образовательные стартапы**
- **Корпоративные L&D отделы**

### 4.3 User Personas

#### Persona 1: Владелец школы
- **Имя**: Алексей, 38 лет
- **Роль**: Основатель онлайн-школы английского
- **Цель**: Масштабировать бизнес без найма кураторов
- **Боль**: "Мы тратим 180к/мес на потерянных студентов"
- **Ожидание от демо**: Увидеть реальные цифры ROI

#### Persona 2: Куратор
- **Имя**: Мария, 28 лет
- **Роль**: Куратор курса (проверяет ДЗ, отвечает на вопросы)
- **Цель**: Справляться с нагрузкой без переработок
- **Боль**: "100 сообщений в день, я не успеваю"
- **Ожидание от демо**: Понять, как AI упростит работу

---

## 5. Функциональные требования

### 5.1 Интерактивные секции кейса

#### Section 1: Исходная проблема
| Требование | Приоритет | Описание |
|------------|-----------|----------|
| FR-1.1 | Must | Скриншоты перегруженного чата кураторов |
| FR-1.2 | Must | Метрики "до": retention 85%, убыток 180к/мес |
| FR-1.3 | Should | Таблица типовых проблем студентов |
| FR-1.4 | Could | Анимация "падающих сообщений" |

#### Section 2: Решение
| Требование | Приоритет | Описание |
|------------|-----------|----------|
| FR-2.1 | Must | Схема компонентов решения |
| FR-2.2 | Must | Timeline внедрения (4 этапа) |
| FR-2.3 | Should | Интерактивный timeline с hover-эффектами |

#### Section 3: AI-ассистент
| Требование | Приоритет | Описание |
|------------|-----------|----------|
| FR-3.1 | Must | **Работающий чат** с реальным AI |
| FR-3.2 | Must | Индикатор набора текста "AI печатает..." |
| FR-3.3 | Must | Отображение времени ответа (1-3 сек) |
| FR-3.4 | Should | Предзаготовленные вопросы (quick replies) |
| FR-3.5 | Should | Счетчик "90% вопросов решено AI" |
| FR-3.6 | Could | Озвучка ответов (TTS) |

#### Section 4: Личный кабинет студента
| Требование | Приоритет | Описание |
|------------|-----------|----------|
| FR-4.1 | Must | Профиль студента (демо-данные) |
| FR-4.2 | Must | Список уроков со статусами |
| FR-4.3 | Must | Анимированный прогресс-бар (65%) |
| FR-4.4 | Should | Возможность "завершить урок" (демо) |
| FR-4.5 | Should | Результаты тестов |
| FR-4.6 | Could | Скачиваемый сертификат (PDF) |

#### Section 5: Дашборд куратора
| Требование | Приоритет | Описание |
|------------|-----------|----------|
| FR-5.1 | Must | Таблица студентов с индикаторами риска |
| FR-5.2 | Must | Фильтр по статусу (all/active/at_risk/dropped) |
| FR-5.3 | Must | Панель уведомлений (ДЗ, неактивность) |
| FR-5.4 | Should | Real-time обновления (WebSocket) |
| FR-5.5 | Should | Метрики: всего/активных/завершивших |
| FR-5.6 | Could | Экспорт списка в CSV |

#### Section 6: Результаты
| Требование | Приоритет | Описание |
|------------|-----------|----------|
| FR-6.1 | Must | Анимированный график retention (85%→92%) |
| FR-6.2 | Must | Столбчатая диаграмма прибыли |
| FR-6.3 | Should | Gauge chart "Экономия часов" |
| FR-6.4 | Should | Таблица сравнения (до vs после) |
| FR-6.5 | Could | Анимация при скролле (intersection observer) |

#### Section 7: Финансы
| Требование | Приоритет | Описание |
|------------|-----------|----------|
| FR-7.1 | Must | Инвестиция: 400к руб |
| FR-7.2 | Must | ROI: 30 дней |
| FR-7.3 | Must | Годовой результат: +4.4 млн руб |
| FR-7.4 | Should | Калькулятор ROI (ввод своих данных) |

### 5.2 Авторизация

| Требование | Приоритет | Описание |
|------------|-----------|----------|
| FR-A.1 | Must | Авторизация через Telegram Mini App |
| FR-A.2 | Must | Валидация initData через HMAC-SHA256 |
| FR-A.3 | Must | JWT токены с 7-day expiry |
| FR-A.4 | Should | Demo-режим без Telegram (для разработки) |

---

## 6. Нефункциональные требования

### 6.1 Performance

| Требование | Метрика | Значение |
|------------|---------|----------|
| NFR-P.1 | Время ответа AI | < 3 сек |
| NFR-P.2 | Время загрузки страницы | < 2 сек (LCP) |
| NFR-P.3 | API latency (p95) | < 200 мс |
| NFR-P.4 | Concurrent users | 100+ |

### 6.2 Reliability

| Требование | Метрика | Значение |
|------------|---------|----------|
| NFR-R.1 | Uptime | 99.5% |
| NFR-R.2 | Error rate | < 1% |
| NFR-R.3 | Data backup | Daily |

### 6.3 Security

| Требование | Описание |
|------------|----------|
| NFR-S.1 | HTTPS everywhere |
| NFR-S.2 | JWT токены в httpOnly cookies |
| NFR-S.3 | Rate limiting на API (100 req/min) |
| NFR-S.4 | Input validation (Pydantic) |
| NFR-S.5 | SQL injection prevention (ORM) |

### 6.4 Maintainability

| Требование | Описание |
|------------|----------|
| NFR-M.1 | Type safety (TypeScript + mypy) |
| NFR-M.2 | Lint (Ruff, ESLint) |
| NFR-M.3 | Test coverage > 70% |
| NFR-M.4 | CI/CD через Coolify |

---

## 7. User Stories

### Epic 1: Просмотр кейса

```
US-1.1: Как посетитель, я хочу увидеть проблему клиента,
        чтобы понять контекст решения.
        
        Acceptance Criteria:
        - Вижу скриншоты перегруженного чата
        - Вижу метрики "до" (retention 85%, убыток 180к)
        - Понимаю боль клиента за 30 сек
```

```
US-1.2: Как посетитель, я хочу попробовать AI-чат,
        чтобы убедиться, что он работает.
        
        Acceptance Criteria:
        - Могу задать любой вопрос по английскому
        - AI отвечает за 1-3 секунды
        - Вижу индикатор "AI печатает..."
        - Вижу время ответа
```

```
US-1.3: Как посетитель, я хочу увидеть дашборд куратора,
        чтобы понять, как работает приоритизация.
        
        Acceptance Criteria:
        - Вижу список студентов с индикаторами риска
        - Могу фильтровать по статусу
        - Вижу уведомления в реальном времени
```

```
US-1.4: Как посетитель, я хочу увидеть финансовые результаты,
        чтобы оценить ROI.
        
        Acceptance Criteria:
        - Вижу retention до/после на графике
        - Вижу экономию в рублях
        - Понимаю срок окупаемости
```

### Epic 2: Интерактив

```
US-2.1: Как посетитель, я хочу "завершить урок" в демо-кабинете,
        чтобы увидеть, как обновляется прогресс.
        
        Acceptance Criteria:
        - Клик на урок меняет статус
        - Прогресс-бар анимируется
        - Toast-уведомление "Урок завершен"
```

```
US-2.2: Как посетитель, я хочу получать real-time уведомления,
        чтобы понять динамику системы.
        
        Acceptance Criteria:
        - Toast появляется при "событии"
        - "Иван завершил урок 3"
        - "Мария задала вопрос"
```

---

## 8. UI/UX Requirements

### 8.1 Навигация
- Single-page scroll с anchor links
- Sticky header с прогресс-баром секций
- Mobile-first responsive design

### 8.2 Визуальный стиль
- Цветовая схема: Blue (primary), Green (success), Red (danger)
- Шрифт: Inter (system font fallback)
- Иконки: Lucide
- Графики: Chart.js с анимациями

### 8.3 Анимации
- Графики: fade-in при скролле
- Числа: count-up анимация
- Прогресс-бары: плавное заполнение
- Toast: slide-in/slide-out

### 8.4 Responsive Breakpoints
- Mobile: < 640px
- Tablet: 640px - 1024px
- Desktop: > 1024px

---

## 9. Data Model

### 9.1 Основные сущности

| Сущность | Описание | Ключевые поля |
|----------|----------|---------------|
| User | Telegram-аккаунт | telegram_id, role |
| Student | Профиль студента | name, status, risk_score |
| Course | Курс | title, total_lessons |
| Lesson | Урок | title, order_index, content_type |
| StudentProgress | Прогресс | student_id, lesson_id, status |
| Test | Тест | lesson_id, passing_score |
| TestResult | Результат теста | score, passed |
| Homework | ДЗ | lesson_id, due_days |
| HomeworkSubmission | Сданное ДЗ | ai_score, ai_feedback |
| ChatSession | Сессия чата | student_id |
| ChatMessage | Сообщение | role, content, response_time_ms |
| Notification | Уведомление | type, read |
| DailyMetrics | Метрики | retention_rate, ai_resolution_rate |

### 9.2 Связи

```
User 1:1 Student
Course 1:N Lesson
Lesson 1:N Test
Lesson 1:N Homework
Student 1:N StudentProgress
Student 1:N TestResult
Student 1:N HomeworkSubmission
Student 1:N ChatSession
ChatSession 1:N ChatMessage
Student 1:N Notification
```

---

## 10. API Design

### 10.1 Authentication

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/auth/telegram` | POST | Авторизация через initData |
| `/api/auth/me` | GET | Текущий пользователь |
| `/api/auth/logout` | POST | Выход |

### 10.2 Students

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/students` | GET | Список с фильтрами |
| `/api/students/{id}` | GET | Детали студента |
| `/api/students/{id}/progress` | GET | Прогресс |
| `/api/students/{id}/complete-lesson` | POST | Завершить урок |

### 10.3 Chat

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/chat/message` | POST | Отправить вопрос AI |
| `/api/chat/history/{student_id}` | GET | История |
| `/api/chat/stats` | GET | Статистика |

### 10.4 Dashboard

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/dashboard/students` | GET | Студенты с рисками |
| `/api/dashboard/notifications` | GET | Уведомления |
| `/api/dashboard/metrics` | GET | Real-time метрики |

### 10.5 Metrics

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/metrics/retention` | GET | Данные для графика |
| `/api/metrics/comparison` | GET | До vs После |
| `/api/metrics/summary` | GET | Общая сводка |

---

## 11. Technical Stack

### 11.1 Backend
- **Python 3.12** + **FastAPI**
- **SQLAlchemy 2.x** (async) + **Alembic**
- **Pydantic 2.x** (validation)
- **python-jose** (JWT)
- **httpx** (HTTP client)
- **Granian** (ASGI server)

### 11.2 Frontend
- **Vue.js 3.5** (Composition API)
- **TypeScript 5.x**
- **Vite 6.x**
- **TailwindCSS 3.x**
- **Pinia** (state)
- **Axios** (HTTP)
- **Chart.js** (графики)

### 11.3 Database
- **PostgreSQL 16** + **pgvector**
- **Redis 7** (cache)

### 11.4 Infrastructure
- **Docker** + **Docker Compose**
- **Nginx** (reverse proxy)
- **MinIO** (S3)
- **Directus** (admin panel)
- **Coolify** (deploy)

### 11.5 Integrations
- **OpenAI API** (GPT-4o-mini)
- **Telegram Bot API** (auth)

---

## 12. Milestones & Timeline

### Phase 1: Infrastructure (2-3 дня)
- [ ] FastAPI проект + SQLAlchemy
- [ ] Vue + Vite + Tailwind
- [ ] Docker Compose
- [ ] Модели + миграции

### Phase 2: Backend API (3-4 дня)
- [ ] Auth (Telegram)
- [ ] Students CRUD
- [ ] Chat API + OpenAI
- [ ] Dashboard API
- [ ] Metrics API
- [ ] WebSocket

### Phase 3: Frontend (4-5 дней)
- [ ] Layout + навигация
- [ ] Section 1-2 (статика)
- [ ] Section 3 (AI чат)
- [ ] Section 4 (кабинет)
- [ ] Section 5 (дашборд)
- [ ] Section 6-7 (графики)

### Phase 4: Polish (2-3 дня)
- [ ] Real-time уведомления
- [ ] Анимации
- [ ] Демо-данные
- [ ] Responsive
- [ ] Тестирование

### Phase 5: Deploy (1 день)
- [ ] GitHub push
- [ ] Coolify config
- [ ] SSL + domains

**Total: 12-16 дней**

---

## 13. Risks & Mitigations

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| OpenAI API latency | Medium | High | Fallback на заготовленные ответы |
| Telegram auth issues | Low | High | Demo-режим без Telegram |
| pgvector complexity | Low | Medium | Простой vector search без RAG |
| Scope creep | High | Medium | MVP scope lock, backlog для v2 |

---

## 14. Success Metrics

### 14.1 Demo Engagement
- **Time on page** > 3 мин
- **Chat interactions** > 3 вопроса
- **Scroll depth** > 80%

### 14.2 Lead Generation
- **Конверсия в заявку** > 5%
- **Качество лидов** (отвечают на follow-up) > 50%

### 14.3 Technical
- **Uptime** > 99.5%
- **AI response time** < 3 сек
- **Error rate** < 1%

---

## 15. Out of Scope (v1)

- Реальная интеграция с GetCourse API
- Многоязычность (только RU)
- Mobile app (только web)
- Видео-контент в уроках
- Real платежи
- Admin panel (используем Directus)

---

## 16. Future Considerations (v2)

- [ ] Интеграция с реальным GetCourse
- [ ] Telegram бот для студентов
- [ ] Голосовой AI-ассистент
- [ ] A/B тестирование landing
- [ ] Аналитика поведения посетителей
- [ ] Калькулятор ROI с кастомными данными

---

## Appendix A: Wireframes

*См. отдельный файл WIREFRAMES.md*

## Appendix B: API Schema

*См. файл ARCHITECTURE.md, секция 3*

## Appendix C: Database Schema

*См. файл DATABASE.md*
